# 对话记录（2025-12-26）

## 需求

- 建一个“工作周计划登记系统”，对齐截图字段：所属大类、子项目、本周目标、进度（百分比或自由表示）、目标细节、预计工时、工时合计、周期（年/月/第几周）、负责人/参与人（MVP以负责人为主）。
- 需要支持登记、查询/汇总、导出Excel、基础权限；并按给定实现方案落地。

## 已交付（MVP）

- 项目目录：`weekly-plan-system/`
- 技术栈：FastAPI + SQLAlchemy + SQLite（默认）+ Jinja2（Web界面）+ openpyxl（Excel导出）
- 功能：
  - 登录/退出（默认初始化管理员）
  - 我的周计划：自动生成本周周期与本周计划入口
  - 周计划详情：条目增删改
    - 字段：所属大类、子项目、本周目标、进度（百分比/自由）、目标细节、预计工时
    - 可选“目标细节明细（多条+工时）”：用于工时合计统计（明细存在时优先按明细求和）
  - 团队视图（管理员）：支持按年/周/负责人/大类/子项目筛选，并显示工时合计
  - 字典管理（管理员）：所属大类/子项目可维护
  - 导出：周计划 `.xlsx`（表头与截图一致，含“合计”行）

## 默认账号

- 用户名：`admin`
- 密码：`admin123`

可通过环境变量覆盖：`INIT_ADMIN_USERNAME` / `INIT_ADMIN_PASSWORD` / `INIT_ADMIN_NAME`

## 运行方式

参考：`weekly-plan-system/README.md`

```bash
cd weekly-plan-system
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --reload --port 8000
```

打开：`http://127.0.0.1:8000`

